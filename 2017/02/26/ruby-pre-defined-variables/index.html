<!doctype html><html lang=en-us>
<head>
<link rel=apple-touch-icon sizes=180x180 href=/apple-touch-icon.png>
<link rel=icon type=image/png sizes=32x32 href=/favicon-32x32.png>
<link rel=icon type=image/png sizes=16x16 href=/favicon-16x16.png>
<link rel=manifest href=/site.webmanifest>
<link rel=mask-icon href=/safari-pinned-tab.svg color=#5bbad5>
<meta name=msapplication-TileColor content="#da532c">
<meta name=theme-color content="#ffffff">
<meta charset=utf-8>
<meta name=viewport content="width=device-width,initial-scale=1">
<meta http-equiv=x-ua-compatible content="ie=edge,chrome=1">
<title>Ruby Pre-defined variables &#183; Bear Su's Blog - Running Bear!!! </title>
<meta name=generator content="Hugo 0.92.0">
<meta name=description content="Running Bear!!!">
<meta name=twitter:card content="summary_large_image">
<meta name=twitter:image content="https://blog.bear-su.dev/images/bear.jpeg">
<meta name=twitter:title content="Ruby Pre-defined variables">
<meta name=twitter:description content="
圖片來源
フリー写真素材ぱくたそ
ruby 本身有先定義了一些變數與常數
可以用在取得系統資訊，或是除錯上
有些變數可以使得在開發時少打一些程式碼，但相對的可讀性可能就會降低一些(不是所有人都熟悉符號的意義)
這裡紀錄一些我覺得值得一提的部分">
<meta property="og:title" content="Ruby Pre-defined variables">
<meta property="og:description" content="
圖片來源
フリー写真素材ぱくたそ
ruby 本身有先定義了一些變數與常數
可以用在取得系統資訊，或是除錯上
有些變數可以使得在開發時少打一些程式碼，但相對的可讀性可能就會降低一些(不是所有人都熟悉符號的意義)
這裡紀錄一些我覺得值得一提的部分">
<meta property="og:type" content="article">
<meta property="og:url" content="https://blog.bear-su.dev/2017/02/26/ruby-pre-defined-variables/"><meta property="og:image" content="https://blog.bear-su.dev/images/bear.jpeg"><meta property="article:section" content>
<meta property="article:published_time" content="2017-02-26T07:41:00+08:00">
<meta property="article:modified_time" content="2017-02-26T07:41:00+08:00">
<link href rel=alternate type=application/rss+xml title="Bear Su's Blog">
<link href rel=feed type=application/rss+xml title="Bear Su's Blog">
<meta itemprop=name content="Ruby Pre-defined variables">
<meta itemprop=description content="
圖片來源
フリー写真素材ぱくたそ
ruby 本身有先定義了一些變數與常數
可以用在取得系統資訊，或是除錯上
有些變數可以使得在開發時少打一些程式碼，但相對的可讀性可能就會降低一些(不是所有人都熟悉符號的意義)
這裡紀錄一些我覺得值得一提的部分"><meta itemprop=datePublished content="2017-02-26T07:41:00+08:00">
<meta itemprop=dateModified content="2017-02-26T07:41:00+08:00">
<meta itemprop=wordCount content="196"><meta itemprop=image content="https://blog.bear-su.dev/images/bear.jpeg">
<meta itemprop=keywords content>
<link href="https://fonts.googleapis.com/css?family=Lato:400" rel=stylesheet>
<link rel=stylesheet href=https://blog.bear-su.dev/css/style.css>
<script type=application/ld+json>{"@context":"http://schema.org","@type":"WebSite","name":"Bear Su\u0027s Blog","url":"https:\/\/blog.bear-su.dev\/2017\/02\/26\/ruby-pre-defined-variables\/"}</script>
</head>
<body>
<header class=gheader>
<div class=container>
<nav class=navbar>
<div class=navbar-brand>
<a class=navbar-item href=https://blog.bear-su.dev>
<p class=brand>Bear Su's Blog</p>
</a>
<div class="navbar-burger burger" data-target=navMenubd-example>
<span></span>
<span></span>
<span></span>
</div>
</div>
<div id=navMenubd-example class=navbar-menu>
<div class=navbar-start>
<a class=navbar-item href=/categories/>
Categories
</a>
<a class=navbar-item href=https://github.com/timfanda35>
GitHub
</a>
<a class=navbar-item href=https://www.linkedin.com/in/bearsu>
Linkedin
</a>
<a class=navbar-item href=https://twitter.com/Fandayo>
Twitter
</a>
</div>
</div>
</nav>
</div>
</header>
<div class=main-content>
<div class=container>
<article class=post>
<header class=post-header>
<h1 class=title>Ruby Pre-defined variables</h1>
<div class=meta>
<time class=pub-time datetime=2017-02-26T07:41:00+08:00>
2017.02.26
</time>
<div class=terms>
<div class=categories>
<a class=categories-item href=/categories/ruby>ruby</a>
</div>
</div>
</div>
</header>
<div class=post-body>
<div class=toc-wrap>
<h2>Table of Contents</h2>
<nav id=TableOfContents>
<ul>
<li><a href=#正規表示式比對>正規表示式比對</a></li>
<li><a href=#檔案相關>檔案相關</a></li>
<li><a href=#錯誤>錯誤</a></li>
<li><a href=#參考>參考</a></li>
</ul>
</nav>
</div>
<p><img src=https://i.imgur.com/EsiorQx.jpg alt></p>
<p><a href=https://www.pakutaso.com/20160628181pc-11.html>圖片來源</a>
<a href=https://www.pakutaso.com/>フリー写真素材ぱくたそ</a></p>
<p>ruby 本身有先定義了一些變數與常數</p>
<p>可以用在取得系統資訊，或是除錯上</p>
<p>有些變數可以使得在開發時少打一些程式碼，但相對的可讀性可能就會降低一些(不是所有人都熟悉符號的意義)</p>
<p>這裡紀錄一些我覺得值得一提的部分</p>
<h2 id=正規表示式比對>正規表示式比對 <a href=#%e6%ad%a3%e8%a6%8f%e8%a1%a8%e7%a4%ba%e5%bc%8f%e6%af%94%e5%b0%8d>¶</a></h2>
<hr>
<table>
<thead>
<tr>
<th>變數名稱</th>
<th>說明</th>
</tr>
</thead>
<tbody>
<tr>
<td>$~</td>
<td>最後比對到的結果，MatchData 類別</td>
</tr>
<tr>
<td>$&</td>
<td>完整比對到的字串</td>
</tr>
<tr>
<td>$`</td>
<td>比對到的字串之前的字串</td>
</tr>
<tr>
<td>$'</td>
<td>比對到的字串之後的字串</td>
</tr>
<tr>
<td>$1, $2, &mldr;</td>
<td>比對到的群組，這裡是從 1 開始</td>
</tr>
<tr>
<td>$+</td>
<td>最後比對到的群組</td>
</tr>
</tbody>
</table>
<p>例子：</p>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-ruby data-lang=ruby><span style=color:#75715e># 比對字串</span>
<span style=color:#f92672>&gt;</span> <span style=color:#e6db74>/b(c)(d)e/</span> <span style=color:#f92672>=~</span> <span style=color:#e6db74>&#34;abcdef&#34;</span>
<span style=color:#f92672>=&gt;</span> <span style=color:#ae81ff>1</span>

<span style=color:#75715e># 最後比對到的結果</span>
<span style=color:#f92672>&gt;</span> $~
<span style=color:#f92672>=&gt;</span> <span style=color:#75715e>#&lt;MatchData &#34;bcde&#34; 1:&#34;c&#34; 2:&#34;d&#34;&gt;</span>

<span style=color:#75715e># 完整比對到的字串</span>
<span style=color:#f92672>&gt;</span> $&amp;
<span style=color:#f92672>=&gt;</span> <span style=color:#e6db74>&#34;bcde&#34;</span>

<span style=color:#75715e># 比對到的字串之前的字串</span>
<span style=color:#f92672>&gt;</span> $`
<span style=color:#f92672>=&gt;</span> <span style=color:#e6db74>&#34;a&#34;</span>

<span style=color:#75715e># 比對到的字串之後的字串</span>
<span style=color:#f92672>&gt;</span> $&#39;
<span style=color:#f92672>=&gt;</span> <span style=color:#e6db74>&#34;f&#34;</span>

<span style=color:#75715e># 比對到的群組</span>
<span style=color:#f92672>&gt;</span> $1
<span style=color:#f92672>=&gt;</span> <span style=color:#e6db74>&#34;c&#34;</span>
<span style=color:#f92672>&gt;</span> $2
<span style=color:#f92672>=&gt;</span> <span style=color:#e6db74>&#34;d&#34;</span>
<span style=color:#f92672>&gt;</span> $3
<span style=color:#f92672>=&gt;</span> <span style=color:#66d9ef>nil</span>

<span style=color:#75715e># 最後比對到的群組</span>
<span style=color:#f92672>&gt;</span> $+
<span style=color:#f92672>=&gt;</span> <span style=color:#e6db74>&#34;d&#34;</span>
</code></pre></div><h2 id=檔案相關>檔案相關 <a href=#%e6%aa%94%e6%a1%88%e7%9b%b8%e9%97%9c>¶</a></h2>
<hr>
<p><code>$0</code> 是目前執行 ruby 的檔案名稱，假設用 <code>irb</code> 印出 <code>$0</code></p>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-ruby data-lang=ruby><span style=color:#f92672>&gt;</span> $0
<span style=color:#f92672>=&gt;</span> <span style=color:#e6db74>&#34;irb&#34;</span>
</code></pre></div><p>若是執行 <code>test.rb</code></p>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>bash$ echo <span style=color:#e6db74>&#39;puts $0&#39;</span> &gt; test.rb
bash$ ruby test.rb
test.rb
</code></pre></div><p><code>DATA</code> 這個比較常用到在 pure ruby script，它是用來取得在檔案 <code>__END__</code> 以下的字串</p>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-ruby data-lang=ruby><span style=color:#75715e># test.rb</span>

<span style=color:#75715e># 注意 DATA 是 File 類別，所以可以用 `read` 取得內容</span>
puts <span style=color:#66d9ef>DATA</span><span style=color:#f92672>.</span>read

<span style=color:#75715e>__END__
</span><span style=color:#75715e>I have a pen.
</span><span style=color:#75715e>I have an apple.
</span></code></pre></div><p>執行 <code>ruby test.rb</code></p>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-ruby data-lang=ruby>bash<span style=color:#960050;background-color:#1e0010>$</span> ruby test<span style=color:#f92672>.</span>rb
I have a pen<span style=color:#f92672>.</span>
I have an apple<span style=color:#f92672>.</span>
</code></pre></div><p><code>ENV</code> 這個有用 <code>rails</code> 的開發者應該不陌生，可以用來取得環境變數</p>
<h2 id=錯誤>錯誤 <a href=#%e9%8c%af%e8%aa%a4>¶</a></h2>
<hr>
<p><code>$!</code> 取得最後 raise 的 Exception 訊息</p>
<p><code>$@</code> 取得最後的 Exception 錯誤推疊陣列</p>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-ruby data-lang=ruby><span style=color:#75715e># test.rb</span>

<span style=color:#66d9ef>begin</span>
  <span style=color:#66d9ef>raise</span> <span style=color:#66d9ef>StandardError</span><span style=color:#f92672>.</span>new <span style=color:#e6db74>&#34;Mayday&#34;</span>
<span style=color:#66d9ef>rescue</span> <span style=color:#f92672>=&gt;</span> e
  puts $!
  puts $@
<span style=color:#66d9ef>end</span>
</code></pre></div><p>執行 <code>ruby test.rb</code></p>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-ruby data-lang=ruby>bash<span style=color:#960050;background-color:#1e0010>$</span> ruby test<span style=color:#f92672>.</span>rb
<span style=color:#66d9ef>Mayday</span>
test<span style=color:#f92672>.</span>rb:<span style=color:#ae81ff>2</span><span style=color:#e6db74>:in</span> <span style=color:#e6db74>`&lt;main&gt;&#39;
</span></code></pre></div><h2 id=參考>參考 <a href=#%e5%8f%83%e8%80%83>¶</a></h2>
<hr>
<p><a href=https://ruby-doc.org/core-2.1.1/doc/globals_rdoc.html>ruby-doc globals_rdoc</a>
<a href=https://ruby-doc.org/core-2.1.1/Regexp.html#class-Regexp-label-Special+global+variables>ruby-doc Regexp</a></p>
</div>
<footer class=post-footer>
<hr>
<div style=margin-top:2.5rem>
<div style=display:flex;justify-content:center;width:100%>
<p style=color:gray>
如果覺得這篇文章對您有所幫助，歡迎贊助我一杯咖啡 ☕️
</p>
</div>
<div style=display:flex;justify-content:center;width:100%>
<p style=color:gray>
祝您有美好的一天 ❤️
</p>
</div>
<div style=display:flex;justify-content:center;width:100%;margin-top:1rem>
<script type=text/javascript src=https://cdnjs.buymeacoffee.com/1.0.0/button.prod.min.js data-name=bmc-button data-slug=timfanda35 data-color=#FFDD00 data-emoji data-font=Bree data-text="Buy me a coffee" data-outline-color=#000000 data-font-color=#000000 data-coffee-color=#ffffff></script>
</div>
</div>
<hr>
<div style=margin-top:1rem>
<script src=https://utteranc.es/client.js repo=timfanda35/timfanda35.github.io issue-term=pathname label=comment theme=github-light crossorigin=anonymous async></script>
</div>
<div class=share>
</div>
<div class=pagenation>
<ul class=pagenation-list>
<li class="pager previous">
<a href=https://blog.bear-su.dev/2017/02/19/ruby-array-methods/ data-toggle=tooltip data-placement=top title="Ruby Array 的一些筆記">&larr; Previous Post</a>
</li>
<li class="pager next">
<a href=https://blog.bear-su.dev/2017/03/05/ruby-time-and-date/ data-toggle=tooltip data-placement=top title="Ruby Time and Date">Next Post &rarr;</a>
</li>
</ul>
</div>
</footer>
</article>
<article class=related></article>
<script type=application/ld+json>{"@context":"http://schema.org","@type":"NewsArticle","mainEntityOfPage":{"@type":"NewsArticle","@id":"https:\/\/blog.bear-su.dev\/2017\/02\/26\/ruby-pre-defined-variables\/","headline":"圖片來源 フリー写真素材ぱくたそruby 本身有先定義了一些變數與常數可以用在取得系統資訊，或是除錯上有些變數可以使得在開發時少打一些程式碼，但相對的可讀性可能就會降低一些(不是所有人都熟悉符號的意義)這裡紀錄一些我覺得","author":"Bear Su","publisher":{"@type":"Organization","name":"Bear Su","logo":""},"image":"","datePublished":"2017-02-26"},"headline":"圖片來源 フリー写真素材ぱくたそruby 本身有先定義了一些變數與常數可以用在取得系統資訊，或是除錯上有些變數可以使得在開發時少打一些程式碼，但相對的可讀性可能就會降低一些(不是所有人都熟悉符號的意義)這裡紀錄一些我覺得","alternativeHeadline":"Bear Su\u0027s Blog","datePublished":"2017-02-26","dateModified":"2017-02-26","url":"https:\/\/blog.bear-su.dev\/2017\/02\/26\/ruby-pre-defined-variables\/","wordCount":"196","author":{"@type":"Person","name":"Bear Su"},"publisher":{"@type":"Organization","name":"Bear Su"},"image":"","genre":"ruby","description":""}</script>
<script type=application/ld+json>{"@context":"http://schema.org","@type":"Person","@id":"https:\/\/blog.bear-su.dev\/2017\/02\/26\/ruby-pre-defined-variables\/","name":"Bear Su"}</script>
</div>
</div>
<footer class=gfooter>
<div class=inner>
<div class=container>
<p class=copy>
<small>Copyright © 2015 - 2022 Bear Su's Blog</small>
<small> | 本部落格有使用 Google Analytic 及 Cookie</small>
</p>
<nav class=footer-nav>
<div class=inner>
</div>
</nav>
</div>
</div>
</footer>
<script async src="https://www.googletagmanager.com/gtag/js?id=G-KJXNT5CQCS"></script>
<script>var doNotTrack=!1;if(!doNotTrack){window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag('js',new Date),gtag('config','G-KJXNT5CQCS',{anonymize_ip:!1})}</script>
<script src=https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.0/jquery.min.js integrity="sha512-894YE6QWD5I59HgZOGReFYm4dnWc1Qt5NtvYSaNcOP+u1T9qYdvdihz0PPSiiqn/+/3e7Jo4EaG7TubfWGUrMQ==" crossorigin=anonymous referrerpolicy=no-referrer></script>
<script src=https://blog.bear-su.dev/js/script.js></script>
</body>
</html>