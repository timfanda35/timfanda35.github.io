<?xml version="1.0" encoding="utf-8" standalone="yes"?><rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom"><channel><title>gcp on Bear Su's Blog</title><link>https://blog.bear-su.dev/categories/gcp/</link><description>Recent content in gcp on Bear Su's Blog</description><generator>Hugo -- gohugo.io</generator><language>en-us</language><copyright>Copyright © 2015 - 2022 Bear Su's Blog</copyright><lastBuildDate>Sun, 20 Feb 2022 12:00:00 +0800</lastBuildDate><atom:link href="https://blog.bear-su.dev/categories/gcp/index.xml" rel="self" type="application/rss+xml"/><item><title>Docker log on Google Compute Engine</title><link>https://blog.bear-su.dev/2022/02/20/docker-log-on-gce/</link><pubDate>Sun, 20 Feb 2022 12:00:00 +0800</pubDate><guid>https://blog.bear-su.dev/2022/02/20/docker-log-on-gce/</guid><description>在 Google Compute Engine 上安裝 Docker，想要將 Container 的 log 匯出至 Google Cloud Logging，可以將 Docker Log Driver 改成 gcplogs 後重新啟動 Docker service。
編輯 /etc/docker/daemon.json，在設定檔中加入 log-driver 設定：
{ &amp;#34;log-driver&amp;#34;:&amp;#34;gcplogs&amp;#34; } 記得重新啟動 Docker Service 載入變更後的設定：
sudo systemctl restart docker 這樣 Container 寫入 stdout 的 log 就會被送至 Google Cloud Logging。
其他相關的參數設定可參考文末連結。
Ref ¶ https://docs.docker.com/config/containers/logging/gcplogs/</description></item><item><title>使用 Embulk 從 SQL Server 匯入資料至 BigQuery</title><link>https://blog.bear-su.dev/2020/05/31/embulk-from-sqlserver-to-bigquery/</link><pubDate>Sun, 31 May 2020 12:00:00 +0800</pubDate><guid>https://blog.bear-su.dev/2020/05/31/embulk-from-sqlserver-to-bigquery/</guid><description>&lt;p>&lt;img src="https://blog.bear-su.dev/images/2020-05-31/embulk-from-sqlserver-to-bigquery/cover.jpg" alt="">&lt;/p>
&lt;p>&lt;a style="background-color:black;color:white;text-decoration:none;padding:4px 6px;font-family:-apple-system, BlinkMacSystemFont, &amp;quot;San Francisco&amp;quot;, &amp;quot;Helvetica Neue&amp;quot;, Helvetica, Ubuntu, Roboto, Noto, &amp;quot;Segoe UI&amp;quot;, Arial, sans-serif;font-size:12px;font-weight:bold;line-height:1.2;display:inline-block;border-radius:3px" href="https://unsplash.com/@shadejay?utm_medium=referral&amp;amp;utm_campaign=photographer-credit&amp;amp;utm_content=creditBadge" target="_blank" rel="noopener noreferrer" title="Download free do whatever you want high-resolution photos from Antony Xia">&lt;span style="display:inline-block;padding:2px 3px">&lt;svg xmlns="http://www.w3.org/2000/svg" style="height:12px;width:auto;position:relative;vertical-align:middle;top:-2px;fill:white" viewBox="0 0 32 32">&lt;title>unsplash-logo&lt;/title>&lt;path d="M10 9V0h12v9H10zm12 5h10v18H0V14h10v9h12v-9z">&lt;/path>&lt;/svg>&lt;/span>&lt;span style="display:inline-block;padding:2px 3px">Antony Xia&lt;/span>&lt;/a>&lt;/p>
&lt;p>本文將使用開源軟體 Embulk SQL Server 匯入資料至 BigQuery。&lt;/p>
&lt;p>一般批次匯入 BigQuery 皆會先從 SQL Server 匯出資料表成 CSV 格式後，再透過 ETL 工具或是直接執行 BigQuery Load Job 匯入。在網路上也有商業的 ETL 軟體與服務能夠直接串接 SQL Server 至 BigQuery，省去自己匯出 CSV 的麻煩。&lt;/p>
&lt;p>SQL Server 匯出成 BigQuery 可以接受的 CSV 格式，比較麻煩的主要有兩點：&lt;/p>
&lt;ol>
&lt;li>文字欄位的分隔。若欄位值有包含半形逗號(,)或是包含半形逗號(,)與雙引號(&amp;quot;)，若沒有正確地處理這兩個符號，在解析 CSV 欄位的時候就會難以判斷分隔欄位導致匯入失敗。&lt;/li>
&lt;li>NULL 值。SQL Server 匯出 CSV 時，會在欄位值中填入 NULL ，但在匯入 BigQeury 時會被解析成字串，所以必須要先將欄位值為 NULL 的欄位修改為空值再匯入。&lt;/li>
&lt;/ol></description></item><item><title>Packer on GCP with Cloud Build</title><link>https://blog.bear-su.dev/2020/02/08/packer-on-gcp-with-cloud-build/</link><pubDate>Sat, 08 Feb 2020 12:00:00 +0800</pubDate><guid>https://blog.bear-su.dev/2020/02/08/packer-on-gcp-with-cloud-build/</guid><description>&lt;p>&lt;img src="https://blog.bear-su.dev/images/2020-02-08/packer-on-gcp-with-cloud-build/cover.jpg" alt="">&lt;/p>
&lt;p>&lt;a style="background-color:black;color:white;text-decoration:none;padding:4px 6px;font-family:-apple-system, BlinkMacSystemFont, &amp;quot;San Francisco&amp;quot;, &amp;quot;Helvetica Neue&amp;quot;, Helvetica, Ubuntu, Roboto, Noto, &amp;quot;Segoe UI&amp;quot;, Arial, sans-serif;font-size:12px;font-weight:bold;line-height:1.2;display:inline-block;border-radius:3px" href="https://unsplash.com/@shadejay?utm_medium=referral&amp;amp;utm_campaign=photographer-credit&amp;amp;utm_content=creditBadge" target="_blank" rel="noopener noreferrer" title="Download free do whatever you want high-resolution photos from Antony Xia">&lt;span style="display:inline-block;padding:2px 3px">&lt;svg xmlns="http://www.w3.org/2000/svg" style="height:12px;width:auto;position:relative;vertical-align:middle;top:-2px;fill:white" viewBox="0 0 32 32">&lt;title>unsplash-logo&lt;/title>&lt;path d="M10 9V0h12v9H10zm12 5h10v18H0V14h10v9h12v-9z">&lt;/path>&lt;/svg>&lt;/span>&lt;span style="display:inline-block;padding:2px 3px">Antony Xia&lt;/span>&lt;/a>&lt;/p>
&lt;p>&lt;a href="https://blog.bear-su.dev/2020/02/01/packer-on-gcp/">上一篇&lt;/a>使用 Packet 將建置 VM Image 的步驟自動化。本文將會使用 GCP 上的 Cloud Build 來與 Source Control 做結合，達成只要上 code 就會建置新版本的 VM Image。&lt;/p></description></item><item><title>Packer on GCP</title><link>https://blog.bear-su.dev/2020/02/01/packer-on-gcp/</link><pubDate>Sat, 01 Feb 2020 12:00:00 +0800</pubDate><guid>https://blog.bear-su.dev/2020/02/01/packer-on-gcp/</guid><description>&lt;p>&lt;img src="https://blog.bear-su.dev/images/2020-02-01/packer-on-gcp/cover.jpg" alt="">&lt;/p>
&lt;p>&lt;a style="background-color:black;color:white;text-decoration:none;padding:4px 6px;font-family:-apple-system, BlinkMacSystemFont, &amp;quot;San Francisco&amp;quot;, &amp;quot;Helvetica Neue&amp;quot;, Helvetica, Ubuntu, Roboto, Noto, &amp;quot;Segoe UI&amp;quot;, Arial, sans-serif;font-size:12px;font-weight:bold;line-height:1.2;display:inline-block;border-radius:3px" href="https://unsplash.com/@shadejay?utm_medium=referral&amp;amp;utm_campaign=photographer-credit&amp;amp;utm_content=creditBadge" target="_blank" rel="noopener noreferrer" title="Download free do whatever you want high-resolution photos from Antony Xia">&lt;span style="display:inline-block;padding:2px 3px">&lt;svg xmlns="http://www.w3.org/2000/svg" style="height:12px;width:auto;position:relative;vertical-align:middle;top:-2px;fill:white" viewBox="0 0 32 32">&lt;title>unsplash-logo&lt;/title>&lt;path d="M10 9V0h12v9H10zm12 5h10v18H0V14h10v9h12v-9z">&lt;/path>&lt;/svg>&lt;/span>&lt;span style="display:inline-block;padding:2px 3px">Antony Xia&lt;/span>&lt;/a>&lt;/p>
&lt;p>想要將在 GCP 建置 GCE VM Image 的過程自動化，又不想寫一堆針對 GCP Service 操作的 Script。可以使用 Hashicorp Packer 來協助一鍵建置。&lt;/p></description></item><item><title>用指令建立 Cloud Build Trigger</title><link>https://blog.bear-su.dev/2018/09/01/create-cloudbuild-trigger-with-command/</link><pubDate>Sat, 01 Sep 2018 16:10:00 +0800</pubDate><guid>https://blog.bear-su.dev/2018/09/01/create-cloudbuild-trigger-with-command/</guid><description>&lt;p>&lt;img src="https://blog.bear-su.dev/images/2018-09-01/create-cloudbuild-trigger-with-command/cover.jpg" alt="">&lt;/p>
&lt;p>&lt;a href="https://www.pakutaso.com/20151102331web-14.html">圖片來源&lt;/a>
&lt;a href="https://www.pakutaso.com/">フリー写真素材ぱくたそ&lt;/a>&lt;/p>
&lt;p>目前還無法使用 &lt;code>gcloud&lt;/code> 指令直接建立 Cloud Build Trigger，必須要透過 REST API&lt;/p>
&lt;p>在編寫 Shell Script 的時候對於認證的部分就比較麻煩，要使用 REST API 就必須要有 Token 來驗證身份&lt;/p>
&lt;p>現在我們可以透過 &lt;code>gcloud auth application-default print-access-token&lt;/code> 輕鬆取得所需的 Token&lt;/p></description></item><item><title>用快取加速 Cloud Build 建置容器</title><link>https://blog.bear-su.dev/2018/09/01/cloudbuild-with-cache/</link><pubDate>Sat, 01 Sep 2018 14:40:00 +0800</pubDate><guid>https://blog.bear-su.dev/2018/09/01/cloudbuild-with-cache/</guid><description>&lt;p>&lt;img src="https://i.imgur.com/EsiorQx.jpg" alt="">&lt;/p>
&lt;p>&lt;a href="https://www.pakutaso.com/20160628181pc-11.html">圖片來源&lt;/a>
&lt;a href="https://www.pakutaso.com/">フリー写真素材ぱくたそ&lt;/a>&lt;/p>
&lt;p>參考至 Google Cloud Platform Cloud Build 官方文件：&lt;a href="https://cloud.google.com/cloud-build/docs/speeding-up-builds">Speeding up your Builds&lt;/a>&lt;/p>
&lt;p>可以使用之前建置過的 Docker Image 來當作快取，來加快建置 Docker Image 的速度&lt;/p>
&lt;p>這方法需要使用 &lt;code>cloudbuild.yaml&lt;/code>&lt;/p>
&lt;p>使用方式：&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4">&lt;code class="language-shell" data-lang="shell">gcloud builds submit --config cloudbuild.yaml .
&lt;/code>&lt;/pre>&lt;/div>&lt;p>或是在設定 cloud build trigger 時指定使用 &lt;code>cloudbuild.yaml&lt;/code>&lt;/p></description></item><item><title>Google Cloud OnBoard 20170419</title><link>https://blog.bear-su.dev/2017/04/19/google-cloud-onboard-20170419/</link><pubDate>Wed, 19 Apr 2017 15:16:00 +0800</pubDate><guid>https://blog.bear-su.dev/2017/04/19/google-cloud-onboard-20170419/</guid><description>&lt;p>&lt;img src="http://i.imgur.com/Yyals6x.jpg" alt="Imgur">&lt;/p>
&lt;p>今天參加了 &lt;a href="https://cloudplatformonline.com/gcp-tw-googlecloudonboard.html">Google Cloud OnBoard&lt;/a>&lt;/p>
&lt;p>內容主要是 &lt;a href="https://cloud.google.com/">Google Cloud Platform&lt;/a> (GCP) 入門介紹&lt;/p>
&lt;p>參加的人超級多，早餐跟下午茶都搶不到 XD&lt;/p>
&lt;h2 id="主要內容">主要內容 &lt;a href="#%e4%b8%bb%e8%a6%81%e5%85%a7%e5%ae%b9">¶&lt;/a>&lt;/h2>
&lt;hr />
&lt;ul>
&lt;li>Module 1 - Google Cloud Platform 概要&lt;/li>
&lt;li>Module 2 - 開始學習 Google Cloud Platform 的方法&lt;/li>
&lt;li>Module 3 - Google App Engine 與 Cloud Datastore&lt;/li>
&lt;li>Module 4 - Google Cloud Platform 的 Storage 功能&lt;/li>
&lt;li>Module 5 - Google Container Engine&lt;/li>
&lt;li>Module 6 - Google Compute Engine 與 Network 功能&lt;/li>
&lt;li>GCP 的大數據分析工具 / 機器學習與深度學習&lt;/li>
&lt;/ul></description></item></channel></rss>