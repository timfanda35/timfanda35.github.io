<!doctype html><html lang=en-us>
<head>
<link rel=apple-touch-icon sizes=180x180 href=/apple-touch-icon.png>
<link rel=icon type=image/png sizes=32x32 href=/favicon-32x32.png>
<link rel=icon type=image/png sizes=16x16 href=/favicon-16x16.png>
<link rel=manifest href=/site.webmanifest>
<link rel=mask-icon href=/safari-pinned-tab.svg color=#5bbad5>
<meta name=msapplication-TileColor content="#da532c">
<meta name=theme-color content="#ffffff">
<meta charset=utf-8>
<meta name=viewport content="width=device-width,initial-scale=1">
<meta http-equiv=x-ua-compatible content="ie=edge,chrome=1">
<title>ActiveRecord merge method &#183; Bear Su's Blog - Running Bear!!! </title>
<meta name=generator content="Hugo 0.92.0">
<meta name=description content="Running Bear!!!">
<meta name=twitter:card content="summary_large_image">
<meta name=twitter:image content="https://blog.bear-su.dev/images/bear.jpeg">
<meta name=twitter:title content="ActiveRecord merge method">
<meta name=twitter:description content="
圖片來源
之前查資料找到這篇 Rails where() clause on model association?
原來在查詢條件包含關聯表欄位的時候還有 merge 的方法可以用
之前都在 joins 裡面硬刻 SQL query&mldr;">
<meta property="og:title" content="ActiveRecord merge method">
<meta property="og:description" content="
圖片來源
之前查資料找到這篇 Rails where() clause on model association?
原來在查詢條件包含關聯表欄位的時候還有 merge 的方法可以用
之前都在 joins 裡面硬刻 SQL query&mldr;">
<meta property="og:type" content="article">
<meta property="og:url" content="https://blog.bear-su.dev/2017/03/19/active-record-merge-method/"><meta property="og:image" content="https://blog.bear-su.dev/images/bear.jpeg"><meta property="article:section" content>
<meta property="article:published_time" content="2017-03-19T05:13:00+08:00">
<meta property="article:modified_time" content="2017-03-19T05:13:00+08:00">
<link href rel=alternate type=application/rss+xml title="Bear Su's Blog">
<link href rel=feed type=application/rss+xml title="Bear Su's Blog">
<meta itemprop=name content="ActiveRecord merge method">
<meta itemprop=description content="
圖片來源
之前查資料找到這篇 Rails where() clause on model association?
原來在查詢條件包含關聯表欄位的時候還有 merge 的方法可以用
之前都在 joins 裡面硬刻 SQL query&mldr;"><meta itemprop=datePublished content="2017-03-19T05:13:00+08:00">
<meta itemprop=dateModified content="2017-03-19T05:13:00+08:00">
<meta itemprop=wordCount content="298"><meta itemprop=image content="https://blog.bear-su.dev/images/bear.jpeg">
<meta itemprop=keywords content>
<link href="https://fonts.googleapis.com/css?family=Lato:400" rel=stylesheet>
<link rel=stylesheet href=https://blog.bear-su.dev/css/style.css>
<script type=application/ld+json>{"@context":"http://schema.org","@type":"WebSite","name":"Bear Su\u0027s Blog","url":"https:\/\/blog.bear-su.dev\/2017\/03\/19\/active-record-merge-method\/"}</script>
</head>
<body>
<header class=gheader>
<div class=container>
<nav class=navbar>
<div class=navbar-brand>
<a class=navbar-item href=https://blog.bear-su.dev>
<p class=brand>Bear Su's Blog</p>
</a>
<div class="navbar-burger burger" data-target=navMenubd-example>
<span></span>
<span></span>
<span></span>
</div>
</div>
<div id=navMenubd-example class=navbar-menu>
<div class=navbar-start>
<a class=navbar-item href=/categories/>
Categories
</a>
<a class=navbar-item href=https://github.com/timfanda35>
GitHub
</a>
<a class=navbar-item href=https://www.linkedin.com/in/bearsu>
Linkedin
</a>
<a class=navbar-item href=https://twitter.com/Fandayo>
Twitter
</a>
</div>
</div>
</nav>
</div>
</header>
<div class=main-content>
<div class=container>
<article class=post>
<header class=post-header>
<h1 class=title>ActiveRecord merge method</h1>
<div class=meta>
<time class=pub-time datetime=2017-03-19T05:13:00+08:00>
2017.03.19
</time>
<div class=terms>
<div class=categories>
<a class=categories-item href=/categories/rails>rails</a>
<a class=categories-item href=/categories/activerecord>activerecord</a>
</div>
</div>
</div>
</header>
<div class=post-body>
<div class=toc-wrap>
<h2>Table of Contents</h2>
<nav id=TableOfContents>
<ul>
<li><a href=#參考>參考</a></li>
</ul>
</nav>
</div>
<p><img src=https://i.imgur.com/EsiorQx.jpg alt></p>
<p><a href=https://www.pakutaso.com/20160628181pc-11.html>圖片來源</a></p>
<p>之前查資料找到這篇 <a href=http://stackoverflow.com/questions/6334537/rails-where-clause-on-model-association>Rails where() clause on model association?</a></p>
<p>原來在查詢條件包含關聯表欄位的時候還有 <code>merge</code> 的方法可以用</p>
<p>之前都在 <code>joins</code> 裡面硬刻 SQL query&mldr;</p>
<p><code>merge</code> 可以合併查詢子句，要做依賴關聯表條件的查詢時非常有用</p>
<p>以 <a href=http://apidock.com/rails/ActiveRecord/SpawnMethods/merge>ActiveRecord::SpawnMethods#merge API Dock</a> 的例子來說：「想要找出至少有一筆非垃圾留言的文章」</p>
<p>首先建立一個新 rails 專案</p>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>$ rails new test_active_record_merge
$ cd test_active_record_merge
</code></pre></div><p>新增 Migragion file</p>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>$ bundle exec rails new start
</code></pre></div><p>編輯 Migragion file</p>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-ruby data-lang=ruby><span style=color:#66d9ef>class</span> <span style=color:#a6e22e>Start</span> <span style=color:#f92672>&lt;</span> <span style=color:#66d9ef>ActiveRecord</span><span style=color:#f92672>::</span><span style=color:#66d9ef>Migration</span><span style=color:#f92672>[</span><span style=color:#ae81ff>5</span><span style=color:#f92672>.</span><span style=color:#ae81ff>0</span><span style=color:#f92672>]</span>
  <span style=color:#66d9ef>def</span> <span style=color:#a6e22e>change</span>
    create_table <span style=color:#e6db74>:posts</span> <span style=color:#66d9ef>do</span> <span style=color:#f92672>|</span>t<span style=color:#f92672>|</span>
      t<span style=color:#f92672>.</span>boolean <span style=color:#e6db74>:published</span>, <span style=color:#e6db74>default</span>: <span style=color:#66d9ef>false</span>
    <span style=color:#66d9ef>end</span>

    create_table <span style=color:#e6db74>:comments</span> <span style=color:#66d9ef>do</span> <span style=color:#f92672>|</span>t<span style=color:#f92672>|</span>
      t<span style=color:#f92672>.</span>boolean <span style=color:#e6db74>:spam</span>, <span style=color:#e6db74>default</span>: <span style=color:#66d9ef>false</span>
      t<span style=color:#f92672>.</span>references <span style=color:#e6db74>:post</span>, <span style=color:#e6db74>index</span>: <span style=color:#66d9ef>true</span>, <span style=color:#e6db74>foreign_key</span>: <span style=color:#66d9ef>true</span>
    <span style=color:#66d9ef>end</span>
  <span style=color:#66d9ef>end</span>
<span style=color:#66d9ef>end</span>
</code></pre></div><p>執行 <code>migrate</code></p>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>$ bundle exec rake db:migrate
</code></pre></div><p>新增 Model file</p>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-ruby data-lang=ruby><span style=color:#75715e># app/models/post.rb</span>
<span style=color:#66d9ef>class</span> <span style=color:#a6e22e>Post</span> <span style=color:#f92672>&lt;</span> <span style=color:#66d9ef>ApplicationRecord</span>
  has_many <span style=color:#e6db74>:comments</span>
<span style=color:#66d9ef>end</span>

<span style=color:#75715e># app/models/comment.rb</span>
<span style=color:#66d9ef>class</span> <span style=color:#a6e22e>Comment</span> <span style=color:#f92672>&lt;</span> <span style=color:#66d9ef>ApplicationRecord</span>
  belongs_to <span style=color:#e6db74>:post</span>
<span style=color:#66d9ef>end</span>
</code></pre></div><p>在 Terminal 中執行 <code>rails c</code> 建立測試資料</p>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-ruby data-lang=ruby><span style=color:#66d9ef>Comment</span><span style=color:#f92672>.</span>create(<span style=color:#e6db74>spam</span>: <span style=color:#66d9ef>true</span>, <span style=color:#e6db74>post</span>: <span style=color:#66d9ef>Post</span><span style=color:#f92672>.</span>create(<span style=color:#e6db74>published</span>: <span style=color:#66d9ef>true</span>))
<span style=color:#66d9ef>Comment</span><span style=color:#f92672>.</span>create(<span style=color:#e6db74>spam</span>: <span style=color:#66d9ef>true</span>, <span style=color:#e6db74>post</span>: <span style=color:#66d9ef>Post</span><span style=color:#f92672>.</span>create(<span style=color:#e6db74>published</span>: <span style=color:#66d9ef>false</span>))
<span style=color:#66d9ef>Comment</span><span style=color:#f92672>.</span>create(<span style=color:#e6db74>spam</span>: <span style=color:#66d9ef>false</span>, <span style=color:#e6db74>post</span>: <span style=color:#66d9ef>Post</span><span style=color:#f92672>.</span>create(<span style=color:#e6db74>published</span>: <span style=color:#66d9ef>true</span>)) <span style=color:#75715e>#符合條件</span>
<span style=color:#66d9ef>Comment</span><span style=color:#f92672>.</span>create(<span style=color:#e6db74>spam</span>: <span style=color:#66d9ef>false</span>, <span style=color:#e6db74>post</span>: <span style=color:#66d9ef>Post</span><span style=color:#f92672>.</span>create(<span style=color:#e6db74>published</span>: <span style=color:#66d9ef>false</span>))
<span style=color:#66d9ef>Post</span><span style=color:#f92672>.</span>create(<span style=color:#e6db74>published</span>: <span style=color:#66d9ef>true</span>)
<span style=color:#66d9ef>Post</span><span style=color:#f92672>.</span>create(<span style=color:#e6db74>published</span>: <span style=color:#66d9ef>false</span>)
</code></pre></div><p>查詢「至少有一筆非垃圾留言的文章」</p>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-ruby data-lang=ruby><span style=color:#66d9ef>Post</span><span style=color:#f92672>.</span>where(<span style=color:#e6db74>published</span>: <span style=color:#66d9ef>true</span>)<span style=color:#f92672>.</span>joins(<span style=color:#e6db74>:comments</span>)<span style=color:#f92672>.</span>merge(<span style=color:#66d9ef>Comment</span><span style=color:#f92672>.</span>where(<span style=color:#e6db74>spam</span>: <span style=color:#66d9ef>false</span>))

<span style=color:#75715e># 相當於</span>
<span style=color:#75715e># Post.where(published: true).joins(&#39;INNER JOIN comments ON comments.post_id = posts.id&#39;).where(&#39;comments.spam = ?&#39;, false)</span>
</code></pre></div><p>結果找到一篇文章</p>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-ruby data-lang=ruby>  <span style=color:#66d9ef>Post</span> <span style=color:#66d9ef>Load</span> (<span style=color:#ae81ff>0</span><span style=color:#f92672>.</span><span style=color:#ae81ff>7</span>ms)  <span style=color:#66d9ef>SELECT</span> <span style=color:#e6db74>&#34;posts&#34;</span><span style=color:#f92672>.</span>* <span style=color:#66d9ef>FROM</span> <span style=color:#e6db74>&#34;posts&#34;</span> <span style=color:#66d9ef>INNER</span> <span style=color:#66d9ef>JOIN</span> <span style=color:#e6db74>&#34;comments&#34;</span> <span style=color:#66d9ef>ON</span> <span style=color:#e6db74>&#34;comments&#34;</span><span style=color:#f92672>.</span><span style=color:#e6db74>&#34;post_id&#34;</span> <span style=color:#f92672>=</span> <span style=color:#e6db74>&#34;posts&#34;</span><span style=color:#f92672>.</span><span style=color:#e6db74>&#34;id&#34;</span> <span style=color:#66d9ef>WHERE</span> <span style=color:#e6db74>&#34;posts&#34;</span><span style=color:#f92672>.</span><span style=color:#e6db74>&#34;published&#34;</span> <span style=color:#f92672>=</span> ? <span style=color:#66d9ef>AND</span> <span style=color:#e6db74>&#34;comments&#34;</span><span style=color:#f92672>.</span><span style=color:#e6db74>&#34;spam&#34;</span> <span style=color:#f92672>=</span> ?  <span style=color:#f92672>[[</span><span style=color:#e6db74>&#34;published&#34;</span>, <span style=color:#66d9ef>true</span><span style=color:#f92672>]</span>, <span style=color:#f92672>[</span><span style=color:#e6db74>&#34;spam&#34;</span>, <span style=color:#66d9ef>false</span><span style=color:#f92672>]]</span>
<span style=color:#f92672>=&gt;</span> <span style=color:#75715e>#&lt;ActiveRecord::Relation [#&lt;Post id: 3, published: true&gt;]&gt;</span>
</code></pre></div><p>但以上測試資料文章都只有一個留言，如果為符合條件的文章再加上一個非垃圾留言後再查詢</p>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-ruby data-lang=ruby><span style=color:#66d9ef>Comment</span><span style=color:#f92672>.</span>create(<span style=color:#e6db74>spam</span>: <span style=color:#66d9ef>false</span>, <span style=color:#e6db74>post</span>: posts<span style=color:#f92672>.</span>first)
posts <span style=color:#f92672>=</span> <span style=color:#66d9ef>Post</span><span style=color:#f92672>.</span>where(<span style=color:#e6db74>published</span>: <span style=color:#66d9ef>true</span>)<span style=color:#f92672>.</span>joins(<span style=color:#e6db74>:comments</span>)<span style=color:#f92672>.</span>merge( <span style=color:#66d9ef>Comment</span><span style=color:#f92672>.</span>where(<span style=color:#e6db74>spam</span>: <span style=color:#66d9ef>false</span>))
</code></pre></div><p>會發現找到兩筆結果，但卻是重複的文章</p>
<p>這是因為 <code>SQL INNER JOIN</code> 的關係，如果我們再為該文章加上一筆新的非垃圾留言，就會變成三筆重複的文章</p>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-ruby data-lang=ruby>  <span style=color:#66d9ef>Post</span> <span style=color:#66d9ef>Load</span> (<span style=color:#ae81ff>0</span><span style=color:#f92672>.</span><span style=color:#ae81ff>1</span>ms)  <span style=color:#66d9ef>SELECT</span> <span style=color:#e6db74>&#34;posts&#34;</span><span style=color:#f92672>.</span>* <span style=color:#66d9ef>FROM</span> <span style=color:#e6db74>&#34;posts&#34;</span> <span style=color:#66d9ef>INNER</span> <span style=color:#66d9ef>JOIN</span> <span style=color:#e6db74>&#34;comments&#34;</span> <span style=color:#66d9ef>ON</span> <span style=color:#e6db74>&#34;comments&#34;</span><span style=color:#f92672>.</span><span style=color:#e6db74>&#34;post_id&#34;</span> <span style=color:#f92672>=</span> <span style=color:#e6db74>&#34;posts&#34;</span><span style=color:#f92672>.</span><span style=color:#e6db74>&#34;id&#34;</span> <span style=color:#66d9ef>WHERE</span> <span style=color:#e6db74>&#34;posts&#34;</span><span style=color:#f92672>.</span><span style=color:#e6db74>&#34;published&#34;</span> <span style=color:#f92672>=</span> ? <span style=color:#66d9ef>AND</span> <span style=color:#e6db74>&#34;comments&#34;</span><span style=color:#f92672>.</span><span style=color:#e6db74>&#34;spam&#34;</span> <span style=color:#f92672>=</span> ?  <span style=color:#f92672>[[</span><span style=color:#e6db74>&#34;published&#34;</span>, <span style=color:#66d9ef>true</span><span style=color:#f92672>]</span>, <span style=color:#f92672>[</span><span style=color:#e6db74>&#34;spam&#34;</span>, <span style=color:#66d9ef>false</span><span style=color:#f92672>]]</span>
<span style=color:#f92672>=&gt;</span> <span style=color:#75715e>#&lt;ActiveRecord::Relation [#&lt;Post id: 3, published: true&gt;, #&lt;Post id: 3, published: true&gt;]&gt;</span>
</code></pre></div><p>這時候可以加上 <code>distinct</code> 來排除重複的資料</p>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-ruby data-lang=ruby><span style=color:#66d9ef>Post</span><span style=color:#f92672>.</span>where(<span style=color:#e6db74>published</span>: <span style=color:#66d9ef>true</span>)<span style=color:#f92672>.</span>joins(<span style=color:#e6db74>:comments</span>)<span style=color:#f92672>.</span>merge(<span style=color:#66d9ef>Comment</span><span style=color:#f92672>.</span>where(<span style=color:#e6db74>spam</span>: <span style=color:#66d9ef>false</span>))<span style=color:#f92672>.</span>distinct
</code></pre></div><p>結果</p>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-ruby data-lang=ruby>  <span style=color:#66d9ef>Post</span> <span style=color:#66d9ef>Load</span> (<span style=color:#ae81ff>0</span><span style=color:#f92672>.</span><span style=color:#ae81ff>2</span>ms)  <span style=color:#66d9ef>SELECT</span> <span style=color:#66d9ef>DISTINCT</span> <span style=color:#e6db74>&#34;posts&#34;</span><span style=color:#f92672>.</span>* <span style=color:#66d9ef>FROM</span> <span style=color:#e6db74>&#34;posts&#34;</span> <span style=color:#66d9ef>INNER</span> <span style=color:#66d9ef>JOIN</span> <span style=color:#e6db74>&#34;comments&#34;</span> <span style=color:#66d9ef>ON</span> <span style=color:#e6db74>&#34;comments&#34;</span><span style=color:#f92672>.</span><span style=color:#e6db74>&#34;post_id&#34;</span> <span style=color:#f92672>=</span> <span style=color:#e6db74>&#34;posts&#34;</span><span style=color:#f92672>.</span><span style=color:#e6db74>&#34;id&#34;</span> <span style=color:#66d9ef>WHERE</span> <span style=color:#e6db74>&#34;posts&#34;</span><span style=color:#f92672>.</span><span style=color:#e6db74>&#34;published&#34;</span> <span style=color:#f92672>=</span> ? <span style=color:#66d9ef>AND</span> <span style=color:#e6db74>&#34;comments&#34;</span><span style=color:#f92672>.</span><span style=color:#e6db74>&#34;spam&#34;</span> <span style=color:#f92672>=</span> ?  <span style=color:#f92672>[[</span><span style=color:#e6db74>&#34;published&#34;</span>, <span style=color:#66d9ef>true</span><span style=color:#f92672>]</span>, <span style=color:#f92672>[</span><span style=color:#e6db74>&#34;spam&#34;</span>, <span style=color:#66d9ef>false</span><span style=color:#f92672>]]</span>
<span style=color:#f92672>=&gt;</span> <span style=color:#75715e>#&lt;ActiveRecord::Relation [#&lt;Post id: 3, published: true&gt;]&gt;</span>
</code></pre></div><h2 id=參考>參考 <a href=#%e5%8f%83%e8%80%83>¶</a></h2>
<hr>
<p><a href=http://stackoverflow.com/questions/6334537/rails-where-clause-on-model-association>Rails where() clause on model association?</a>
<a href=http://apidock.com/rails/ActiveRecord/SpawnMethods/merge>ActiveRecord::SpawnMethods#merge API Dock</a>
<a href=http://apidock.com/rails/ActiveRecord/QueryMethods/joins>ActiveRecord::SpawnMethods#joins API Dock</a></p>
</div>
<footer class=post-footer>
<hr>
<div style=margin-top:2.5rem>
<div style=display:flex;justify-content:center;width:100%>
<p style=color:gray>
如果覺得這篇文章對您有所幫助，歡迎贊助我一杯咖啡 ☕️
</p>
</div>
<div style=display:flex;justify-content:center;width:100%>
<p style=color:gray>
祝您有美好的一天 ❤️
</p>
</div>
<div style=display:flex;justify-content:center;width:100%;margin-top:1rem>
<script type=text/javascript src=https://cdnjs.buymeacoffee.com/1.0.0/button.prod.min.js data-name=bmc-button data-slug=timfanda35 data-color=#FFDD00 data-emoji data-font=Bree data-text="Buy me a coffee" data-outline-color=#000000 data-font-color=#000000 data-coffee-color=#ffffff></script>
</div>
</div>
<hr>
<div style=margin-top:1rem>
<script src=https://utteranc.es/client.js repo=timfanda35/timfanda35.github.io issue-term=pathname label=comment theme=github-light crossorigin=anonymous async></script>
</div>
<div class=share>
</div>
<div class=pagenation>
<ul class=pagenation-list>
<li class="pager previous">
<a href=https://blog.bear-su.dev/2017/03/05/ruby-time-and-date/ data-toggle=tooltip data-placement=top title="Ruby Time and Date">&larr; Previous Post</a>
</li>
<li class="pager next">
<a href=https://blog.bear-su.dev/2017/03/19/ruby-association-certified-ruby-programmer-silver-exam-preparation/ data-toggle=tooltip data-placement=top title="Ruby Association Certified Ruby Programmer Silver 考試準備">Next Post &rarr;</a>
</li>
</ul>
</div>
</footer>
</article>
<article class=related></article>
<script type=application/ld+json>{"@context":"http://schema.org","@type":"NewsArticle","mainEntityOfPage":{"@type":"NewsArticle","@id":"https:\/\/blog.bear-su.dev\/2017\/03\/19\/active-record-merge-method\/","headline":"圖片來源之前查資料找到這篇 Rails where() clause on model association?原來在查詢條件包含關聯表欄位的時候還有 merge 的方法可以用之前都在 joins 裡面硬刻 SQL qu","author":"Bear Su","publisher":{"@type":"Organization","name":"Bear Su","logo":""},"image":"","datePublished":"2017-03-19"},"headline":"圖片來源之前查資料找到這篇 Rails where() clause on model association?原來在查詢條件包含關聯表欄位的時候還有 merge 的方法可以用之前都在 joins 裡面硬刻 SQL qu","alternativeHeadline":"Bear Su\u0027s Blog","datePublished":"2017-03-19","dateModified":"2017-03-19","url":"https:\/\/blog.bear-su.dev\/2017\/03\/19\/active-record-merge-method\/","wordCount":"298","author":{"@type":"Person","name":"Bear Su"},"publisher":{"@type":"Organization","name":"Bear Su"},"image":"","genre":"railsactiverecord","description":""}</script>
<script type=application/ld+json>{"@context":"http://schema.org","@type":"Person","@id":"https:\/\/blog.bear-su.dev\/2017\/03\/19\/active-record-merge-method\/","name":"Bear Su"}</script>
</div>
</div>
<footer class=gfooter>
<div class=inner>
<div class=container>
<p class=copy>
<small>Copyright © 2015 - 2022 Bear Su's Blog</small>
<small> | 本部落格有使用 Google Analytic 及 Cookie</small>
</p>
<nav class=footer-nav>
<div class=inner>
</div>
</nav>
</div>
</div>
</footer>
<script async src="https://www.googletagmanager.com/gtag/js?id=G-KJXNT5CQCS"></script>
<script>var doNotTrack=!1;if(!doNotTrack){window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag('js',new Date),gtag('config','G-KJXNT5CQCS',{anonymize_ip:!1})}</script>
<script src=https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.0/jquery.min.js integrity="sha512-894YE6QWD5I59HgZOGReFYm4dnWc1Qt5NtvYSaNcOP+u1T9qYdvdihz0PPSiiqn/+/3e7Jo4EaG7TubfWGUrMQ==" crossorigin=anonymous referrerpolicy=no-referrer></script>
<script src=https://blog.bear-su.dev/js/script.js></script>
</body>
</html>